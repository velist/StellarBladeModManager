# 剑星MOD管理器（StellarBlade MOD Manager）

一个基于 PySide6 的剑星MOD桌面管理器，支持MOD导入、分类、启用/禁用、预览图、国际化等功能。

## 主要特性
- MOD一键导入、启用/禁用、重命名、删除
- 分类管理（支持拖动排序、层级调整）
- 预览图展示与修改
- 中英文切换
- 目录树双击展开/收起
- 现代美观UI，深色主题

## 安装说明

### 方法一：直接下载
1. 从 https://pan.xunlei.com/s/VOSV1m7gYTgOshRDP731Xap4A1?pwd=3hep# 页面下载最新版本，含旧版文件
2. 解压后运行 `jianxing-mod-manager.exe`

### 方法二：从源码构建
1. 克隆仓库：
```bash
git clone https://github.com/yourusername/jianxing-mod-manager.git
cd jianxing-mod-manager
```

2. 安装依赖：
```bash
pip install -r requirements.txt
```

3. 运行程序：
```bash
python main.py
```

4. 构建可执行文件：
```bash
python build.py
```

## 依赖要求
- Python 3.8+
- PySide6
- 其他依赖见 requirements.txt

## 使用说明

1. 首次运行时，程序会要求设置游戏目录和MOD备份目录
2. 导入MOD：点击"导入MOD"按钮，选择MOD文件（支持.zip、.rar、.7z格式）
3. 启用/禁用MOD：在MOD列表中双击MOD或使用右键菜单
4. 分类管理：在左侧分类树中右键点击可创建、重命名或删除分类
5. MOD管理：在右侧MOD列表中右键点击可进行更多操作，如重命名、更改分类等
6. 备份/恢复：程序会自动备份MOD，可在设置中更改备份目录

## 系统要求

- Windows 10/11
- Python 3.8+（如使用源代码运行）
- 剑星 (StellarBlade) 游戏

## 技术支持

如有问题或建议，请加入QQ群：682707942

## 许可

本软件免费使用，禁止商业用途。

## 交流群
QQ群：788566495

## 贡献
欢迎提交 Issue 和 Pull Request！

## License
MIT License

## 最新更新 (v1.55)

### 功能增强
1. 添加了"收藏工具箱"按钮，链接到 https://codepen.io/aigame/full/MYwXoGq
   - 按钮样式与"启动游戏"按钮匹配，字体略小

2. 增强MOD列表界面
   - 添加右键上下文菜单，方便MOD管理
   - 实现编辑模式，支持多选功能
   - 新增拖放功能，可在不同分类间移动MOD

3. 新增图标
   - icon_check.svg
   - 移动.svg (移动图标)
   - 关闭-关闭.svg (关闭图标)
   - 开启-开启.svg (开启图标)

### 问题修复
1. 修复了enable_mod函数中restore_mod函数缺少mod_info参数的问题
2. 解决了RAR文件提取问题
   - 现在可以正确处理包含pak、utoc和ucas文件的RAR归档
   - 修复了嵌套RAR文件的提取问题，支持多层嵌套的MOD包
   - 确保正确创建文件夹结构，使MOD能够正常激活

### 其他改进
1. 完善了备份和恢复功能
   - 当前版本已备份至"1.55版本"文件夹
   - 验证了备份和恢复功能的可靠性

## 更新日志

### v1.55 (2025-06-15)
- 修复重命名MOD后无法正确启用的问题
- 修复MOD列表重命名后刷新出现重复MOD的问题
- 修复子文件夹MOD备份不完整的问题，现在会备份同目录下的所有文件
- 优化MOD启用/禁用逻辑，确保使用正确的文件名
- 改进使用说明文档和界面布局

### v1.54 (2025-06-10)
- 修复导入嵌套压缩包时可能出现的错误
- 改进MOD列表显示，添加更多信息
- 优化界面响应速度
- 添加自动检查更新功能
- 修复部分用户报告的界面显示问题

### v1.53 (2025-06-01)
- 添加拖放支持，可直接拖动MOD文件到程序中导入
- 改进MOD分类管理功能
- 修复部分用户报告的启动问题
- 优化MOD扫描速度
- 添加更多提示信息

### v1.52 (2025-05-20)
- 添加MOD预览图功能
- 支持自定义MOD名称和描述
- 修复部分MOD无法正确识别的问题
- 改进用户界面，添加更多操作提示
- 优化程序启动速度

### v1.51 (2025-05-10)
- 修复MOD备份和恢复功能的问题
- 添加MOD搜索功能
- 改进错误处理和日志记录
- 优化界面布局和响应速度
- 添加中英文界面切换功能

### v1.50 (2025-05-01)
- 首次发布
- 基本的MOD导入、启用和禁用功能
- MOD分类管理
- 备份和恢复功能
- 基本的用户界面

## 使用说明
[待添加]

# 剑星MOD管理器 1.58版本 修复说明

## 修复的问题

1. **MOD重命名问题**：
   - 修复了重命名MOD后，下次启动时恢复原名称的问题
   - 现在重命名MOD会同时更改MOD ID，确保重命名持久化
   - 添加了对MOD原始名称的保存，便于追踪

2. **备份目录问题**：
   - 修复了备份路径处理不一致的问题
   - 统一使用Path对象处理路径，确保跨平台兼容性
   - 添加了更详细的日志，便于调试备份问题

3. **MOD扫描与识别问题**：
   - 改进了MOD扫描逻辑，能够识别和保留用户自定义名称
   - 通过文件路径匹配，确保重命名后的MOD能被正确识别
   - 保留MOD的自定义属性，如预览图、分类等

4. **预览图与重命名的交互**：
   - 修复了添加预览图后MOD名称保留但未添加预览图时名称恢复的问题
   - 确保MOD ID变更后，备份也使用新的ID

5. **分类操作问题**：
   - 修复了B区顶部删除按钮不起作用的问题
   - 修复了选中新建的分类导入的MOD在刷新后移动至默认分类的问题
   - 修复了分类拖拽后可能导致MOD分类被重置的问题
   - 修复了默认分类被误操作拖拽到其他分类导致消失的问题

## 测试工具

1. **test_rename_mod.py**：
   - 测试MOD重命名功能
   - 验证MOD ID更改是否正确处理
   - 检查重命名后的MOD信息是否完整

2. **test_backup_restore.py**：
   - 测试MOD备份和还原功能
   - 模拟MOD文件被删除的情况
   - 验证备份和还原过程是否正确

## 如何使用

1. 正常启动MOD管理器
2. 重命名MOD后，下次启动时名称将被保留
3. 添加预览图后，重命名也会被保留
4. 备份目录现在能够正确处理，确保MOD可以被正确备份和还原

## 技术细节

1. 修改了`ConfigManager.update_mod`方法，添加对MOD ID更改的支持
2. 修改了`ModManager.scan_mods_directory`方法，使其能够识别和保留用户重命名的MOD
3. 修改了`ConfigManager.backup_mod`和`restore_mod_from_backup`方法，确保备份目录路径正确处理
4. 修改了`MainWindow.rename_mod`方法，确保重命名后的MOD能够被正确处理和显示

## 版本 1.58 修复版

### 修复内容：

1. 修复了重命名MOD后重启应用名称恢复原状的问题
2. 修复了添加预览图后重启时重命名和图片未保留的问题
3. 修复了备份目录只备份导入图片的问题
4. 修复了C3区操作按钮点击无反应的问题
5. 修复了C1区卡片信息区域字段信息重复和颜色对比度问题
6. 修复了修改名称后重复备份的问题
7. 修复了重命名MOD后预览图路径不正确的问题
8. 修复了启用/禁用MOD功能不稳定的问题
9. 修复了列表改名导致备份目录重复备份的问题
10. 修复了首次打开时备份不成功的问题
11. 修复了重命名MOD后预览图不显示的问题
12. 修复了选中新建的分类导入的MOD在刷新后移动至默认分类的问题
13. 修复了B区顶部删除按钮不起作用的问题
14. 修复了分类拖拽后可能导致MOD分类被重置的问题
15. 修复了默认分类被误操作拖拽到其他分类导致消失的问题

### 使用方法：

1. 解压后运行 `剑星MOD管理器.exe`
2. 首次运行会自动检测游戏路径，或手动选择
3. 导入MOD：点击"导入MOD"按钮，选择MOD压缩包
4. 启用/禁用MOD：在MOD列表中选择MOD，点击"启用MOD"或"禁用MOD"
5. 分类管理：右键点击左侧分类树可添加、重命名或删除分类
6. 编辑MOD信息：选择MOD后点击"编辑信息"

### 注意事项：

- 请勿在游戏运行时启用/禁用MOD
- 备份目录默认在程序同级的modbackup文件夹中
- 如遇到问题，可尝试重新导入MOD

### 联系方式：

如有问题或建议，请联系开发者

## 更新内容 (1.58版本)

1. 修复了重命名MOD后重启应用名称恢复原状的问题
2. 修复了添加预览图后重启时重命名和图片未保留的问题
3. 修复了备份目录只备份导入图片的问题
4. 修复了C3区操作按钮点击无反应的问题
5. 修复了C1区卡片信息区域字段信息重复和颜色对比度问题
6. 修复了修改名称后重复备份的问题
7. 修复了重命名MOD后预览图路径不正确的问题
8. 修复了启用/禁用MOD功能不稳定的问题
9. 修复了列表改名导致备份目录重复备份的问题
10. 修复了首次打开时备份不成功的问题
11. 修复了重命名MOD后预览图不显示的问题
12. 修复了选中新建的分类导入的MOD在刷新后移动至默认分类的问题
13. 修复了B区顶部删除按钮不起作用的问题
14. 修复了分类拖拽后可能导致MOD分类被重置的问题
15. 修复了默认分类被误操作拖拽到其他分类导致消失的问题

## 使用方法

1. 解压后运行 `剑星MOD管理器.exe`
2. 首次运行会自动检测游戏路径，或手动选择
3. 导入MOD：点击"导入MOD"按钮，选择MOD压缩包
4. 启用/禁用MOD：在MOD列表中选择MOD，点击"启用MOD"或"禁用MOD"
5. 分类管理：右键点击左侧分类树可添加、重命名或删除分类
6. 编辑MOD信息：选择MOD后点击"编辑信息"

## 注意事项

- 请勿在游戏运行时启用/禁用MOD
- 备份目录默认在程序同级的modbackup文件夹中
- 如遇到问题，可尝试重新导入MOD

## 联系方式

如有问题或建议，请联系开发者

# 剑星MOD管理器

简易的管理MOD的小工具，用于管理剑星MOD，支持一键导入MOD，一键启用/禁用MOD，一键卸载MOD等功能。

## 功能特性

1. 一键导入MOD
2. 一键启用/禁用MOD
3. 一键卸载MOD
4. MOD分类管理
5. 自动备份MOD
6. 中英文切换
7. 支持添加MOD预览图
8. 支持修改MOD信息
9. 支持修改MOD分类

## 使用说明

1. 下载并解压
2. 运行`剑星MOD管理器.exe`
3. 第一次启动会提示设置游戏路径，选择游戏可执行文件位置
4. 导入MOD，选择压缩包即可
5. 可以在MOD列表中进行各种操作

## 更新日志

### 1.59版本
- 修复了默认分类无法重命名的问题
- 分类现在按创建时间排序，默认分类始终在最前面
- 更新游戏可执行文件名为SB-Win64-Shipping.exe
- 加强了分类管理的稳定性

### 1.58版本
- 修复了分类拖拽后可能导致MOD分类被重置的问题
- 强化了对默认分类的保护，防止被误操作拖拽到其他分类导致消失
- 改进了MOD分类功能的稳定性
- 更新游戏可执行文件路径检测

### 1.57版本
- 修复了选中新建的分类导入的MOD在刷新后移动至默认分类的问题
- 修复了B区顶部删除按钮不起作用的问题
- 优化了分类管理功能
- 改进了MOD导入流程

### 1.56版本
- 修复了首次打开时备份不成功的问题
- 修复了重命名MOD后预览图不显示的问题
- 修复了列表改名导致备份目录重复备份的问题
- 添加了更详细的错误提示

### 1.55版本
- 修复了启用/禁用MOD功能不稳定的问题
- 修复了C1区卡片信息区域字段信息重复和颜色对比度问题
- 修复了修改名称后重复备份的问题
- 修复了重命名MOD后预览图路径不正确的问题

### 1.54版本
- 修复了C3区操作按钮点击无反应的问题
- 优化了MOD列表显示
- 改进了预览图显示功能
- 优化了启用/禁用MOD的性能

### 1.53版本
- 修复了重命名MOD后重启应用名称恢复原状的问题
- 修复了添加预览图后重启时重命名和图片未保留的问题
- 修复了备份目录只备份导入图片的问题
- 优化了MOD备份功能

## 注意事项

- 请确保MOD压缩包符合游戏要求的格式
- 建议定期备份游戏存档和MOD文件
- 如遇问题，可以尝试重启应用

## 常见问题

### 配置文件保存问题

程序的配置文件`config.json`保存在程序运行目录下。如果您直接在下载目录运行程序，可能没有写入权限，导致配置无法保存。

解决方法：
1. 将程序移动到一个您有完全访问权限的目录（如桌面或文档文件夹）
2. 以管理员身份运行程序
3. 确保杀毒软件没有阻止程序写入文件

如果您发现每次启动程序都需要重新设置，很可能是因为配置文件没有正确保存。请尝试上述方法解决。
